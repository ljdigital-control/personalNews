document.addEventListener("DOMContentLoaded",function(){function e(e,t){e.classList.add(t)}function t(e,t){e.classList.remove(t)}function n(e,t){window.scrollTo(e,t)}function l(){var t=document.getElementsByTagName("body")[0];e(t,"js")}function o(e){var t=document.getElementsByClassName(e);for(i=0;i<t.length;i++)t[i].onclick=function(e){var t=this.getAttribute("data-target");c(t,e)}}function c(n,l){var o=document.getElementById(n);o.classList.contains("js-visible")?(e(o,"js-hidden"),t(o,"js-visible"),t(B,"js-fx")):(t(o,"js-hidden"),e(o,"js-visible"),e(B,"js-fx")),I("content"),l.preventDefault()}function a(e,t,n){a=document.getElementById(e),a.classList.add("sticky"),stickyHeight=a.clientHeight+"px",document.getElementById(t).style.setProperty(n,stickyHeight)}function s(e){overlayElement=document.getElementById(e),overlayElement.style.top=stickyHeight}function m(n){var l="themeswitch.php?theme=",o=document.getElementsByTagName("html")[0];switchingElement=document.getElementById(n),switchingElement.onclick=function(){xmlhttp=new XMLHttpRequest,this.checked?(e(o,E),t(o,v),xmlhttp.open("GET",l+E,!0),xmlhttp.send(),localStorage.setItem("theme",E),console.log("localStorage Theme is: "+E)):(e(o,v),t(o,E),xmlhttp.open("GET","themeswitch.php?theme="+v,!0),xmlhttp.send(),localStorage.setItem("theme",v),console.log("localStorage Theme is: "+v))}}function d(e){elementContainer=document.getElementById(e),elementContainer.addEventListener("click",r,!1)}function r(e){e.target!==e.currentTarget&&(channelLink=e.target.getAttribute("href"),t(B,"js-fx"),h(channelLink),e.preventDefault()),e.stopPropagation()}function h(l){if(""===l){var o=localStorage.getItem("channel");if(null!==o)var l=o}document.getElementById(x).classList.remove("js-hidden"),renderFile="render-feeds.php",xmlhttp=new XMLHttpRequest,xmlhttp.open("GET",renderFile+l,!0),xmlhttp.send(),overlayContainer=document.getElementById("application-overlay"),e(overlayContainer,"js-hidden"),I("content"),xmlhttp.onreadystatechange=function(){4===xmlhttp.readyState&&xmlhttp.readyState&&(outputContainer=document.getElementById("content"),outputContainer.innerHTML=xmlhttp.response,document.getElementById(x).classList.add("js-hidden"),t(elementToFix,"js-fixed"),document.getElementById("application-overlay").classList.remove("js-visible"),n(0,0),localStorage.setItem("channel",l),f("#feed-items li"),y(u()))}}function u(){return lastReadItemId=localStorage.getItem("lastReadItem"),null!==lastReadItemId||(lastReadItemId=p("#feed-items li")),lastReadItemId}function g(e){localStorage.setItem("lastReadItem",e)}function p(e){return elementId=document.querySelector(e).id,g(elementId),elementId}function y(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})}function f(e){var t=document.querySelectorAll(e);for(i=0;i<t.length;i++)t[i].onclick=function(e){g(this.id)}}function I(l){elementToFix=document.getElementById(l),scrollY=window.pageYOffset,elementToFix.classList.contains("js-fixed")?(t(elementToFix,"js-fixed"),elementToFix.style.top="",n(0,scrollYMem)):(e(elementToFix,"js-fixed"),elementToFix.style.top="-"+scrollY+"px",scrollYMem=scrollY),console.log(scrollYMem)}var v="light",E="dark",x="application-loading",B=document.getElementsByTagName("body")[0],T=localStorage.getItem("theme"),j=document.getElementsByTagName("html")[0];console.log(T),null!==T&&(t(j,v),t(j,E),e(j,T),T===v&&(document.getElementById("theme-switcher").checked=!1),T===E&&(document.getElementById("theme-switcher").checked=!0)),l(),h(""),a("application-header","content","margin-top"),m("theme-switcher"),o("js-overlay-toggle"),s("application-overlay"),d("channels")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRDbGFzcyIsImVsZW1lbnQiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsInNjcm9sbFRvVGFyZ2V0IiwieCIsInkiLCJ3aW5kb3ciLCJzY3JvbGxUbyIsInNldEpzIiwiYm9keSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaGFuZGxlT3ZlcmxheVRyaWdnZXJzIiwiZWxlbWVudENsYXNzTmFtZSIsImVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImkiLCJsZW5ndGgiLCJvbmNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJ0aGlzIiwiZ2V0QXR0cmlidXRlIiwidG9nZ2xlT3ZlcmxheSIsImVsZW1lbnRJZCIsInRhcmdldEVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRhaW5zIiwiZWZmZWN0Q2xhc3NBcHBseVRvIiwiZml4RWxlbWVudCIsInByZXZlbnREZWZhdWx0Iiwic3RpY2t5RWxlbWVudCIsInN0aWNreUlkIiwiY29tcGVuc2F0ZUlkIiwiY29tcGVuc2F0ZVByb3BlcnR5Iiwic3RpY2t5SGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsInBsYWNlT3ZlcmxheSIsIm92ZXJsYXlFbGVtZW50IiwidG9wIiwidGhlbWVTd2l0Y2giLCJyZW5kZXJGaWxlIiwiYXBwbHlUaGVtZUNsYXNzVG8iLCJzd2l0Y2hpbmdFbGVtZW50IiwieG1saHR0cCIsIlhNTEh0dHBSZXF1ZXN0IiwiY2hlY2tlZCIsInRoZW1lRGFyayIsInRoZW1lTGlnaHQiLCJvcGVuIiwic2VuZCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJjb25zb2xlIiwibG9nIiwiY2hhbm5lbFN3aXRjaCIsImVsZW1lbnRDb250YWluZXIiLCJzd2l0Y2hDaGFubmVsIiwiZSIsImN1cnJlbnRUYXJnZXQiLCJjaGFubmVsTGluayIsImFqYXhSZXF1ZXN0Iiwic3RvcFByb3BhZ2F0aW9uIiwic2F2ZWRMb2NhbFN0b3JhZ2VDaGFubmVsIiwiZ2V0SXRlbSIsImVsZW1lbnRUb1RvZ2dsZU9uTG9hZCIsIm92ZXJsYXlDb250YWluZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwib3V0cHV0Q29udGFpbmVyIiwiaW5uZXJIVE1MIiwicmVzcG9uc2UiLCJlbGVtZW50VG9GaXgiLCJjbGlja0ZlZWRJdGVtIiwic2Nyb2xsSW50b1ZpZXciLCJnZXRMYXN0UmVhZEl0ZW1JZCIsImxhc3RSZWFkSXRlbUlkIiwiZ2V0SWRGcm9tRWxlbWVudCIsInNldExhc3RSZWFkSXRlbUlkIiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJiZWhhdmlvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzY3JvbGxZIiwicGFnZVlPZmZzZXQiLCJzY3JvbGxZTWVtIiwic2F2ZWRMb2NhbFN0b3JhZ2VUaGVtZSJdLCJtYXBwaW5ncyI6IkFBQ0FBLFNBQVNDLGlCQUFpQixtQkFBb0IsV0FTNUMsUUFBU0MsR0FBU0MsRUFBUUMsR0FDekJELEVBQVFFLFVBQVVDLElBQUlGLEdBRXZCLFFBQVNHLEdBQVlKLEVBQVFDLEdBQzVCRCxFQUFRRSxVQUFVRyxPQUFPSixHQUkxQixRQUFTSyxHQUFlQyxFQUFFQyxHQUN6QkMsT0FBT0MsU0FBU0gsRUFBRUMsR0FJbkIsUUFBU0csS0FDUixHQUFJQyxHQUFPZixTQUFTZ0IscUJBQXFCLFFBQVEsRUFDakRkLEdBQVNhLEVBQUssTUFNZixRQUFTRSxHQUFzQkMsR0FDOUIsR0FBSUMsR0FBV25CLFNBQVNvQix1QkFBdUJGLEVBQy9DLEtBQUlHLEVBQUUsRUFBR0EsRUFBSUYsRUFBU0csT0FBUUQsSUFDN0JGLEVBQVNFLEdBQUdFLFFBQVUsU0FBU0MsR0FDOUIsR0FBSUMsR0FBU0MsS0FBS0MsYUFBYSxjQUMvQkMsR0FBY0gsRUFBT0QsSUFJeEIsUUFBU0ksR0FBY0MsRUFBVUwsR0FDaEMsR0FBSU0sR0FBZ0I5QixTQUFTK0IsZUFBZUYsRUFFekNDLEdBQWN6QixVQUFVMkIsU0FBUyxlQUNuQzlCLEVBQVM0QixFQUFjLGFBQ3ZCdkIsRUFBWXVCLEVBQWMsY0FDMUJ2QixFQUFZMEIsRUFBbUIsV0FFL0IxQixFQUFZdUIsRUFBYyxhQUMxQjVCLEVBQVM0QixFQUFjLGNBQ3ZCNUIsRUFBUytCLEVBQW1CLFVBRTdCQyxFQUFXLFdBQ1hWLEVBQU1XLGlCQUlQLFFBQVNDLEdBQWNDLEVBQVNDLEVBQWFDLEdBQzVDSCxFQUFnQnBDLFNBQVMrQixlQUFlTSxHQUN4Q0QsRUFBYy9CLFVBQVVDLElBQUksVUFDNUJrQyxhQUFlSixFQUFjSyxhQUFlLEtBRzVDekMsU0FBUytCLGVBQWVPLEdBQWNJLE1BQU1DLFlBQVlKLEVBQW1CQyxjQUk1RSxRQUFTSSxHQUFhZixHQUNyQmdCLGVBQWlCN0MsU0FBUytCLGVBQWVGLEdBQ3pDZ0IsZUFBZUgsTUFBTUksSUFBTU4sYUFxQjVCLFFBQVNPLEdBQVlsQixHQUNwQixHQUFJbUIsR0FBYSx5QkFDYkMsRUFBb0JqRCxTQUFTZ0IscUJBQXFCLFFBQVEsRUFFOURrQyxrQkFBbUJsRCxTQUFTK0IsZUFBZUYsR0FDM0NxQixpQkFBaUIzQixRQUFVLFdBQzFCNEIsUUFBVSxHQUFJQyxnQkFDVjFCLEtBQUsyQixTQUNSbkQsRUFBUytDLEVBQW1CSyxHQUM1Qi9DLEVBQVkwQyxFQUFtQk0sR0FDL0JKLFFBQVFLLEtBQUssTUFBTVIsRUFBV00sR0FBVSxHQUN4Q0gsUUFBUU0sT0FDUkMsYUFBYUMsUUFBUSxRQUFTTCxHQUM5Qk0sUUFBUUMsSUFBSSwwQkFBNEJQLEtBRXhDcEQsRUFBUytDLEVBQW1CTSxHQUM1QmhELEVBQVkwQyxFQUFtQkssR0FDL0JILFFBQVFLLEtBQUssTUFBTSx5QkFBeUJELEdBQVcsR0FDdkRKLFFBQVFNLE9BQ1JDLGFBQWFDLFFBQVEsUUFBU0osR0FDOUJLLFFBQVFDLElBQUksMEJBQTRCTixLQU8zQyxRQUFTTyxHQUFjakMsR0FDdEJrQyxpQkFBbUIvRCxTQUFTK0IsZUFBZUYsR0FDM0NrQyxpQkFBaUI5RCxpQkFBaUIsUUFBUytELEdBQWUsR0FJM0QsUUFBU0EsR0FBY0MsR0FDbEJBLEVBQUV4QyxTQUFXd0MsRUFBRUMsZ0JBQ2xCQyxZQUFjRixFQUFFeEMsT0FBT0UsYUFBYSxRQUNwQ3BCLEVBQVkwQixFQUFtQixTQUMvQm1DLEVBQVlELGFBQ1pGLEVBQUU5QixrQkFFSDhCLEVBQUVJLGtCQUlILFFBQVNELEdBQVlELEdBRXBCLEdBQW1CLEtBQWhCQSxFQUFvQixDQUN0QixHQUFJRyxHQUEyQlosYUFBYWEsUUFBUSxVQUNwRCxJQUFnQyxPQUE3QkQsRUFDRixHQUFJSCxHQUFjRyxFQUtwQnRFLFNBQVMrQixlQUFleUMsR0FBdUJuRSxVQUFVRyxPQUFPLGFBQ2hFd0MsV0FBYSxtQkFDYkcsUUFBVSxHQUFJQyxnQkFDZEQsUUFBUUssS0FBSyxNQUFNUixXQUFXbUIsR0FBWSxHQUMxQ2hCLFFBQVFNLE9BRVJnQixpQkFBbUJ6RSxTQUFTK0IsZUFBZSx1QkFDM0M3QixFQUFTdUUsaUJBQWlCLGFBQzFCdkMsRUFBVyxXQUlYaUIsUUFBUXVCLG1CQUFxQixXQUNELElBQXZCdkIsUUFBUXdCLFlBQW9CeEIsUUFBUXdCLGFBQ3ZDQyxnQkFBa0I1RSxTQUFTK0IsZUFBZSxXQUMxQzZDLGdCQUFnQkMsVUFBWTFCLFFBQVEyQixTQUNwQzlFLFNBQVMrQixlQUFleUMsR0FBdUJuRSxVQUFVQyxJQUFJLGFBQzdEQyxFQUFZd0UsYUFBYSxZQUN6Qi9FLFNBQVMrQixlQUFlLHVCQUF1QjFCLFVBQVVHLE9BQU8sY0FDaEVDLEVBQWUsRUFBRSxHQUNqQmlELGFBQWFDLFFBQVEsVUFBV1EsR0FFaENhLEVBQWMsa0JBQ2RDLEVBQWVDLE9BTWxCLFFBQVNBLEtBTVIsTUFMQUMsZ0JBQWlCekIsYUFBYWEsUUFBUSxnQkFDaEIsT0FBbkJZLGlCQUVGQSxlQUFpQkMsRUFBaUIsbUJBRTVCRCxlQUdSLFFBQVNFLEdBQWtCeEQsR0FDMUI2QixhQUFhQyxRQUFRLGVBQWU5QixHQUdyQyxRQUFTdUQsR0FBaUJFLEdBR3pCLE1BRkF6RCxXQUFZN0IsU0FBU3VGLGNBQWNELEdBQVVFLEdBQzdDSCxFQUFrQnhELFdBQ1hBLFVBR1IsUUFBU29ELEdBQWV4RCxHQUN2QnpCLFNBQVMrQixlQUFlTixHQUFRd0QsZ0JBQy9CUSxTQUFVLFdBSVosUUFBU1QsR0FBY00sR0FDdEIsR0FBSW5FLEdBQVduQixTQUFTMEYsaUJBQWlCSixFQUN6QyxLQUFJakUsRUFBRSxFQUFHQSxFQUFJRixFQUFTRyxPQUFRRCxJQUM3QkYsRUFBU0UsR0FBR0UsUUFBVSxTQUFTQyxHQUM5QjZELEVBQWtCM0QsS0FBSzhELEtBTzFCLFFBQVN0RCxHQUFXTCxHQUNuQmtELGFBQWUvRSxTQUFTK0IsZUFBZUYsR0FDdkM4RCxRQUFVL0UsT0FBT2dGLFlBRWRiLGFBQWExRSxVQUFVMkIsU0FBUyxhQUNsQ3pCLEVBQVl3RSxhQUFhLFlBQ3pCQSxhQUFhckMsTUFBTUksSUFBTSxHQUN6QnJDLEVBQWUsRUFBRW9GLGNBRWpCM0YsRUFBUzZFLGFBQWEsWUFDdEJBLGFBQWFyQyxNQUFNSSxJQUFNLElBQU02QyxRQUFVLEtBQ3pDRSxXQUFhRixTQUVkL0IsUUFBUUMsSUFBSWdDLFlBMU5iLEdBQUl0QyxHQUFhLFFBQ2JELEVBQVksT0FDWmtCLEVBQXdCLHNCQUN4QnZDLEVBQXFCakMsU0FBU2dCLHFCQUFxQixRQUFRLEdBbUUzRDhFLEVBQXlCcEMsYUFBYWEsUUFBUSxTQUM5Q3RCLEVBQW9CakQsU0FBU2dCLHFCQUFxQixRQUFRLEVBQzlENEMsU0FBUUMsSUFBSWlDLEdBQ2tCLE9BQTNCQSxJQUNGdkYsRUFBWTBDLEVBQW1CTSxHQUMvQmhELEVBQVkwQyxFQUFtQkssR0FDL0JwRCxFQUFTK0MsRUFBa0I2QyxHQUN4QkEsSUFBMkJ2QyxJQUM3QnZELFNBQVMrQixlQUFlLGtCQUFrQnNCLFNBQVUsR0FFbER5QyxJQUEyQnhDLElBQzdCdEQsU0FBUytCLGVBQWUsa0JBQWtCc0IsU0FBVSxJQThJdER2QyxJQUdBc0QsRUFBWSxJQUdaaEMsRUFBYyxxQkFBcUIsVUFBVSxjQUc3Q1csRUFBWSxrQkFHWjlCLEVBQXNCLHFCQUd0QjJCLEVBQWEsdUJBR2JrQixFQUFjIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGlzIHRoZSBET00gcmVhZHkgZm9yIG1hbmlwdWxhdGlvbj9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblxuXHRcdC8vIC0tLS0gdmFyaWFibGVzIC0tLS1cblx0XHR2YXIgdGhlbWVMaWdodCA9ICdsaWdodCc7XG5cdFx0dmFyIHRoZW1lRGFyayA9ICdkYXJrJztcblx0XHR2YXIgZWxlbWVudFRvVG9nZ2xlT25Mb2FkID0gJ2FwcGxpY2F0aW9uLWxvYWRpbmcnO1xuXHRcdHZhciBlZmZlY3RDbGFzc0FwcGx5VG8gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdO1xuXG5cdFx0Ly8gaGVscGVyOiBjaGFuZ2UgY2xhc3Nlc1xuXHRcdGZ1bmN0aW9uIGFkZENsYXNzKGVsZW1lbnQsY2xhc3NOYW1lKSB7XG5cdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCxjbGFzc05hbWUpIHtcblx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHRcdH1cblxuXHRcdC8vIGhlbHBlcjogc2Nyb2xsIHRvIGRlc2lyZWQgcG9zaXRpb25cblx0XHRmdW5jdGlvbiBzY3JvbGxUb1RhcmdldCh4LHkpIHtcblx0XHRcdHdpbmRvdy5zY3JvbGxUbyh4LHkpO1xuXHRcdH1cblxuXHRcdC8vIGFkZCBKUyB0byBib2R5LXRhZyB0byBhbGxvdyBDU1MtTWFuaXB1bGF0aW9uIGlmIEpTIGlzIGF2YWlsYWJsZVxuXHRcdGZ1bmN0aW9uIHNldEpzKCkge1xuXHRcdFx0dmFyIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07XG5cdFx0XHRhZGRDbGFzcyhib2R5LCdqcycpO1xuXHRcdH1cblxuXHRcdC8vIC0tLS0gZ2xvYmFsIGZ1bmN0aW9ucyAtLS0tXG5cblx0XHQvLyBPdmVybGF5LUhhbmRsaW5nXG5cdFx0ZnVuY3Rpb24gaGFuZGxlT3ZlcmxheVRyaWdnZXJzKGVsZW1lbnRDbGFzc05hbWUpIHtcblx0XHRcdHZhciBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZWxlbWVudENsYXNzTmFtZSk7XG5cdFx0XHRmb3IoaT0wOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0ZWxlbWVudHNbaV0ub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdFx0dmFyIHRhcmdldCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpO1xuXHRcdFx0XHRcdHRvZ2dsZU92ZXJsYXkodGFyZ2V0LGV2ZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRmdW5jdGlvbiB0b2dnbGVPdmVybGF5KGVsZW1lbnRJZCxldmVudCkge1xuXHRcdFx0dmFyIHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuXHRcdFx0dmFyIGZpeEVsZW1lbnRJZCA9ICdjb250ZW50Jztcblx0XHRcdGlmKHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy12aXNpYmxlJykpIHtcblx0XHRcdFx0YWRkQ2xhc3ModGFyZ2V0RWxlbWVudCwnanMtaGlkZGVuJyk7XG5cdFx0XHRcdHJlbW92ZUNsYXNzKHRhcmdldEVsZW1lbnQsJ2pzLXZpc2libGUnKTtcblx0XHRcdFx0cmVtb3ZlQ2xhc3MoZWZmZWN0Q2xhc3NBcHBseVRvLCdqcy1meCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVtb3ZlQ2xhc3ModGFyZ2V0RWxlbWVudCwnanMtaGlkZGVuJyk7XG5cdFx0XHRcdGFkZENsYXNzKHRhcmdldEVsZW1lbnQsJ2pzLXZpc2libGUnKTtcblx0XHRcdFx0YWRkQ2xhc3MoZWZmZWN0Q2xhc3NBcHBseVRvLCdqcy1meCcpO1xuXHRcdFx0fVxuXHRcdFx0Zml4RWxlbWVudCgnY29udGVudCcpO1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cblx0XHQvLyBtYWtlIGVsZW1lbnQgc3RpY2t5ICh2aWEgcG9zaXRpb24gaW4gY3NzKVxuXHRcdGZ1bmN0aW9uIHN0aWNreUVsZW1lbnQoc3RpY2t5SWQsY29tcGVuc2F0ZUlkLGNvbXBlbnNhdGVQcm9wZXJ0eSkge1xuXHRcdFx0c3RpY2t5RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0aWNreUlkKTtcblx0XHRcdHN0aWNreUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc3RpY2t5Jyk7XG5cdFx0XHRzdGlja3lIZWlnaHQgPSBzdGlja3lFbGVtZW50LmNsaWVudEhlaWdodCArICdweCc7XG5cblx0XHRcdC8vYWRkIEVsZW1lbnQtSGVpZ2h0IGFzIGRlZmluZWQgcHJvcGVydHkgdG8gZGVzaXJlZCBlbGVtZW50XG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb21wZW5zYXRlSWQpLnN0eWxlLnNldFByb3BlcnR5KGNvbXBlbnNhdGVQcm9wZXJ0eSxzdGlja3lIZWlnaHQpO1xuXHRcdH1cblxuXHRcdC8vIHBsYWNlIEVsZW1lbnQgaW4gcmVsYXRpb24gdG8gc3RpY2t5IGVsZW1lbnRcblx0XHRmdW5jdGlvbiBwbGFjZU92ZXJsYXkoZWxlbWVudElkKSB7XG5cdFx0XHRvdmVybGF5RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG5cdFx0XHRvdmVybGF5RWxlbWVudC5zdHlsZS50b3AgPSBzdGlja3lIZWlnaHQ7XG5cdFx0fVxuXG5cdFx0Ly8gLS0tLSB0aGVtZS1zd2l0Y2hpbmcgLS0tLVxuXHRcdC8vIGNoZWNrIGlmIGxvY2FsU3RvcmFnZSBpcyBmaWxsZWQgYW5kIHNldCBib2R5LmNsYXNzIHdpdGggaXQuIFRoaXMgaXMgdXNlZnVsLCBpZiB0aGUgc2l0ZSBydW5zIGFzIGFwcFxuXHRcdHZhciBzYXZlZExvY2FsU3RvcmFnZVRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJyk7XG5cdFx0dmFyIGFwcGx5VGhlbWVDbGFzc1RvID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXTtcblx0XHRjb25zb2xlLmxvZyhzYXZlZExvY2FsU3RvcmFnZVRoZW1lKTtcblx0XHRpZihzYXZlZExvY2FsU3RvcmFnZVRoZW1lICE9PSBudWxsKSB7XG5cdFx0XHRyZW1vdmVDbGFzcyhhcHBseVRoZW1lQ2xhc3NUbywgdGhlbWVMaWdodCk7XG5cdFx0XHRyZW1vdmVDbGFzcyhhcHBseVRoZW1lQ2xhc3NUbywgdGhlbWVEYXJrKTtcblx0XHRcdGFkZENsYXNzKGFwcGx5VGhlbWVDbGFzc1RvLHNhdmVkTG9jYWxTdG9yYWdlVGhlbWUpO1xuXHRcdFx0aWYoc2F2ZWRMb2NhbFN0b3JhZ2VUaGVtZSA9PT0gdGhlbWVMaWdodCkge1xuXHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWUtc3dpdGNoZXInKS5jaGVja2VkID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZihzYXZlZExvY2FsU3RvcmFnZVRoZW1lID09PSB0aGVtZURhcmspIHtcblx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoZW1lLXN3aXRjaGVyJykuY2hlY2tlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gc3dpdGNoIHRoZW1lIGJ5IGFkZGluZyBhbmQgcmVtb3ZpbmcgY2xhc3NlcyB0byBib2R5XG5cdFx0ZnVuY3Rpb24gdGhlbWVTd2l0Y2goZWxlbWVudElkKSB7XG5cdFx0XHR2YXIgcmVuZGVyRmlsZSA9ICd0aGVtZXN3aXRjaC5waHA/dGhlbWU9Jztcblx0XHRcdHZhciBhcHBseVRoZW1lQ2xhc3NUbyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdodG1sJylbMF07XG5cblx0XHRcdHN3aXRjaGluZ0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuXHRcdFx0c3dpdGNoaW5nRWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdFx0aWYgKHRoaXMuY2hlY2tlZCkge1xuXHRcdFx0XHRcdGFkZENsYXNzKGFwcGx5VGhlbWVDbGFzc1RvLCB0aGVtZURhcmspO1xuXHRcdFx0XHRcdHJlbW92ZUNsYXNzKGFwcGx5VGhlbWVDbGFzc1RvLCB0aGVtZUxpZ2h0KTtcblx0XHRcdFx0XHR4bWxodHRwLm9wZW4oJ0dFVCcscmVuZGVyRmlsZSt0aGVtZURhcmssdHJ1ZSk7XG5cdFx0XHRcdFx0eG1saHR0cC5zZW5kKCk7XG5cdFx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgdGhlbWVEYXJrKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnbG9jYWxTdG9yYWdlIFRoZW1lIGlzOiAnICsgdGhlbWVEYXJrKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhZGRDbGFzcyhhcHBseVRoZW1lQ2xhc3NUbywgdGhlbWVMaWdodCk7XG5cdFx0XHRcdFx0cmVtb3ZlQ2xhc3MoYXBwbHlUaGVtZUNsYXNzVG8sIHRoZW1lRGFyayk7XG5cdFx0XHRcdFx0eG1saHR0cC5vcGVuKCdHRVQnLCd0aGVtZXN3aXRjaC5waHA/dGhlbWU9Jyt0aGVtZUxpZ2h0LHRydWUpO1xuXHRcdFx0XHRcdHhtbGh0dHAuc2VuZCgpO1xuXHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsIHRoZW1lTGlnaHQpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdsb2NhbFN0b3JhZ2UgVGhlbWUgaXM6ICcgKyB0aGVtZUxpZ2h0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIC0tLS0gTG9hZGluZyBGZWVkcyAodmlhIEFqYXgpIC0tLS1cblx0XHQvLyBhZGQgbGlzdGVuZXJcblx0XHRmdW5jdGlvbiBjaGFubmVsU3dpdGNoKGVsZW1lbnRJZCkge1xuXHRcdFx0ZWxlbWVudENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG5cdFx0XHRlbGVtZW50Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3dpdGNoQ2hhbm5lbCwgZmFsc2UpO1xuXHRcdH1cblxuXHRcdC8vIHByZXBhcmUgbG9hZGluZyBhZnRlciBjbGlja1xuXHRcdGZ1bmN0aW9uIHN3aXRjaENoYW5uZWwoZSkge1xuXHRcdFx0aWYgKGUudGFyZ2V0ICE9PSBlLmN1cnJlbnRUYXJnZXQpIHtcblx0XHRcdFx0Y2hhbm5lbExpbmsgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblx0XHRcdFx0cmVtb3ZlQ2xhc3MoZWZmZWN0Q2xhc3NBcHBseVRvLCdqcy1meCcpO1xuXHRcdFx0XHRhamF4UmVxdWVzdChjaGFubmVsTGluayk7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH1cblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0Ly8gbG9hZGluZyB0aGUgY29udGVudFxuXHRcdGZ1bmN0aW9uIGFqYXhSZXF1ZXN0KGNoYW5uZWxMaW5rKSB7XG5cdFx0XHQvLyBpZiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIG5vIHBhcmFtZXRlciwgd2UncmUgY2hlbmNraW5nIHRoZSBsb2NhbFN0b3JhZywgaWYgb25lIGlzIHByZXNlbnQgYW5kIHVzZSB0aGlzICh1c2VmdWwgZm9yIGluaXRpYWwgbG9hZClcblx0XHRcdGlmKGNoYW5uZWxMaW5rID09PSAnJykge1xuXHRcdFx0XHR2YXIgc2F2ZWRMb2NhbFN0b3JhZ2VDaGFubmVsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NoYW5uZWwnKTtcblx0XHRcdFx0aWYoc2F2ZWRMb2NhbFN0b3JhZ2VDaGFubmVsICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0dmFyIGNoYW5uZWxMaW5rID0gc2F2ZWRMb2NhbFN0b3JhZ2VDaGFubmVsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIHJlcXVlc3RpbmcgdGhlIGNvbnRlbnRcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb1RvZ2dsZU9uTG9hZCkuY2xhc3NMaXN0LnJlbW92ZSgnanMtaGlkZGVuJyk7XG5cdFx0XHRyZW5kZXJGaWxlID0gJ3JlbmRlci1mZWVkcy5waHAnO1xuXHRcdFx0eG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdFx0eG1saHR0cC5vcGVuKCdHRVQnLHJlbmRlckZpbGUrY2hhbm5lbExpbmssdHJ1ZSk7XG5cdFx0XHR4bWxodHRwLnNlbmQoKTtcblxuXHRcdFx0b3ZlcmxheUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHBsaWNhdGlvbi1vdmVybGF5Jyk7XG5cdFx0XHRhZGRDbGFzcyhvdmVybGF5Q29udGFpbmVyLCdqcy1oaWRkZW4nKTtcblx0XHRcdGZpeEVsZW1lbnQoJ2NvbnRlbnQnKTtcblxuXG5cdFx0XHQvLyBvdXRwdXQgaWYgY2FsbCBpcyBzdWNjZXNmdWxcblx0XHRcdHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT09IDQgJiYgeG1saHR0cC5yZWFkeVN0YXRlKSB7XG5cdFx0XHRcdFx0b3V0cHV0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKTtcblx0XHRcdFx0XHRvdXRwdXRDb250YWluZXIuaW5uZXJIVE1MID0geG1saHR0cC5yZXNwb25zZTtcblx0XHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50VG9Ub2dnbGVPbkxvYWQpLmNsYXNzTGlzdC5hZGQoJ2pzLWhpZGRlbicpO1xuXHRcdFx0XHRcdHJlbW92ZUNsYXNzKGVsZW1lbnRUb0ZpeCwnanMtZml4ZWQnKTtcblx0XHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwbGljYXRpb24tb3ZlcmxheScpLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLXZpc2libGUnKTtcblx0XHRcdFx0XHRzY3JvbGxUb1RhcmdldCgwLDApO1xuXHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjaGFubmVsJywgY2hhbm5lbExpbmspO1xuXG5cdFx0XHRcdFx0Y2xpY2tGZWVkSXRlbSgnI2ZlZWQtaXRlbXMgbGknKTtcblx0XHRcdFx0XHRzY3JvbGxJbnRvVmlldyhnZXRMYXN0UmVhZEl0ZW1JZCgpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIC0tLS0gaGFuZGxlIGxhc3QgcmVhZCBpdGVtc1xuXHRcdGZ1bmN0aW9uIGdldExhc3RSZWFkSXRlbUlkKCkge1xuXHRcdFx0bGFzdFJlYWRJdGVtSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFzdFJlYWRJdGVtJyk7XG5cdFx0XHRpZihsYXN0UmVhZEl0ZW1JZCAhPT0gbnVsbCkge1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bGFzdFJlYWRJdGVtSWQgPSBnZXRJZEZyb21FbGVtZW50KCcjZmVlZC1pdGVtcyBsaScpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGxhc3RSZWFkSXRlbUlkO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNldExhc3RSZWFkSXRlbUlkKGVsZW1lbnRJZCkge1xuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xhc3RSZWFkSXRlbScsZWxlbWVudElkKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRJZEZyb21FbGVtZW50KHNlbGVjdG9yKSB7XG5cdFx0XHRlbGVtZW50SWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKS5pZDtcblx0XHRcdHNldExhc3RSZWFkSXRlbUlkKGVsZW1lbnRJZCk7XG5cdFx0XHRyZXR1cm4gZWxlbWVudElkO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNjcm9sbEludG9WaWV3KHRhcmdldCkge1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KS5zY3JvbGxJbnRvVmlldyh7XG5cdFx0XHRcdGJlaGF2aW9yOiAnc21vb3RoJ1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY2xpY2tGZWVkSXRlbShzZWxlY3Rvcikge1xuXHRcdFx0dmFyIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdFx0XHRmb3IoaT0wOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0ZWxlbWVudHNbaV0ub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdFx0c2V0TGFzdFJlYWRJdGVtSWQodGhpcy5pZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vIC0tLS0gZml4IGVsZW1lbnQgdG8gY3VycmVudCBwb3NpdGlvblxuXHRcdGZ1bmN0aW9uIGZpeEVsZW1lbnQoZWxlbWVudElkKSB7XG5cdFx0XHRlbGVtZW50VG9GaXggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuXHRcdFx0c2Nyb2xsWSA9IHdpbmRvdy5wYWdlWU9mZnNldDtcblxuXHRcdFx0aWYoZWxlbWVudFRvRml4LmNsYXNzTGlzdC5jb250YWlucygnanMtZml4ZWQnKSkge1xuXHRcdFx0XHRyZW1vdmVDbGFzcyhlbGVtZW50VG9GaXgsJ2pzLWZpeGVkJyk7XG5cdFx0XHRcdGVsZW1lbnRUb0ZpeC5zdHlsZS50b3AgPSAnJztcblx0XHRcdFx0c2Nyb2xsVG9UYXJnZXQoMCxzY3JvbGxZTWVtKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGFkZENsYXNzKGVsZW1lbnRUb0ZpeCwnanMtZml4ZWQnKTtcblx0XHRcdFx0ZWxlbWVudFRvRml4LnN0eWxlLnRvcCA9ICctJyArIHNjcm9sbFkgKyAncHgnO1xuXHRcdFx0XHRzY3JvbGxZTWVtID0gc2Nyb2xsWTtcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKHNjcm9sbFlNZW0pO1xuXHRcdH1cblxuXHRcdC8vIC0tLS0gaW5pdGlhbGl6ZSAtLS0tXG5cdFx0Ly8gc2V0IEpzIG9uIGJvZHkgaWYgSlMgaXMgYXZhaWxhYmxlXG5cdFx0c2V0SnMoKTtcblxuXHRcdC8vIGluaXRpYWwgbG9hZCBvZiBjb250ZW50XG5cdFx0YWpheFJlcXVlc3QoJycpO1xuXG5cdFx0Ly9zdGlja3kgaGVhZGVyIChpdGVtKGlkKSB0byBmaXgsIGl0ZW0oaWQpIHdpdGggcHJvcGVydHkgdG8gY29tcGVuc2F0ZSBmaXgpXG5cdFx0c3RpY2t5RWxlbWVudCgnYXBwbGljYXRpb24taGVhZGVyJywnY29udGVudCcsJ21hcmdpbi10b3AnKTtcblxuXHRcdC8vIHRoZW1lIHN3aXRjaGVyXG5cdFx0dGhlbWVTd2l0Y2goJ3RoZW1lLXN3aXRjaGVyJyk7XG5cblx0XHQvLyBPdmVybGF5c1xuXHRcdGhhbmRsZU92ZXJsYXlUcmlnZ2VycygnanMtb3ZlcmxheS10b2dnbGUnKTtcblxuXHRcdC8vIHBsYWNlIG92ZXJsYXlcblx0XHRwbGFjZU92ZXJsYXkoJ2FwcGxpY2F0aW9uLW92ZXJsYXknKTtcblxuXHRcdC8vIHN3aXRjaCBjaGFubmVsc1xuXHRcdGNoYW5uZWxTd2l0Y2goJ2NoYW5uZWxzJyk7XG5cblx0fSk7XG4iXSwic291cmNlUm9vdCI6Ii4ifQ==
